Hello sunshine!
<script type="module">
  import { diffAsArray } from 'https://cdn.jsdelivr.net/gh/orstavik/making-a@5/difference.js';
  import { pages } from '../src/demo.js';
  import { tokenize, toTaggatty } from '../src/tokenizer.js';
  import { displayTokens, displayDiffTable } from '../src/displayTags.js';

  const tokenPages = {};
  for (const page in pages) {
    tokenPages[page] = tokenize(pages[page]);
    tokenPages[page].taggatty = toTaggatty(tokenPages[page]);
    tokenPages[page].url = page;
  }

  document.body.append(displayTokens(Object.values(tokenPages)[0]));

  function diffTable(pages) {
    pages = Object.entries(pages);
    const res = {};
    for (let [page, obj] = pages.shift(); page && pages.length; [page, obj] = pages.shift()) {
      res[page] = {};
      for (const [page2, obj2] of pages)
        res[page][page2] = diffAsArray(obj.taggatty, obj2.taggatty);
    }
    return res;
  }

  function dictDictMap(dict, mapper) {
    const res = {};
    for (const key in dict) {
      res[key] = {};
      const inner = dict[key];
      for (const key2 in inner)
        res[key][key2] = mapper(inner[key2]);
    }
    return res;
  }

  const diffMap = diffTable(tokenPages);
  const diffValueMap = dictDictMap(diffMap, (abArray) => {
    const { a, b } = abArray[0];
    const firstIsSame = a.every((v, i) => v === b[i]);
    return abArray.length;
    //
    //if the first is the same, then we filter on 
  });

  //what should we print from the diffMap
  document.body.append(displayDiffTable(diffValueMap));
</script>